# 重构（Refactoring）

一、什么是重构？

在`不改变代码外在行为`的前提下，对代码进行修改，以`改进程序的内部结构`

二、为什么要重构？

在软件工程中，开发迭代的过程实际上是一个熵增的过程，软件系统会随着生命周期的进行变得越来越臃肿、混乱、冗余，从而增加维护与进一步迭代的成本。而重构可以`偿还技术债务、改进软件结构、减小维护和迭代的成本、增加产品可信`。

三、重构有哪些分类？
- 小粒度重构（函数级、小模块）
- 大粒度重构（架构级、大模块）

四、什么时候重构？
- 新增需求时（小粒度）
- 修改BUG时（小粒度）
- 复审代码时（大粒度）
- 代码逻辑混乱、依赖混杂（大粒度）

五、重构有哪些原则？
- 先评审，再重构，不要反复推翻重来
- 新增需求时，不要改动既有代码
- 重构既有代码时，不要新增功能

六、重构工作流程
1. 识别代码坏味道，定位需要重构的模块
2. 小步前进，小粒度重构代码
3. 测试保护，随时回退
